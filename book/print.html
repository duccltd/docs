<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Enlay Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <a href="https://enlay.io">
                    <img src="logo.png" style="width: 100%"/>
                </a>
                <ol class="chapter"><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Enlay Documentation</a></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">2.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="api/api.html"><strong aria-hidden="true">3.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/authentication.html"><strong aria-hidden="true">3.1.</strong> Authentication</a></li><li class="chapter-item expanded "><a href="api/sdks.html"><strong aria-hidden="true">3.2.</strong> Language SDKs</a></li><li class="chapter-item expanded "><a href="api/webhooks/webhooks.html"><strong aria-hidden="true">3.3.</strong> Webhooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/webhooks/promotables.html"><strong aria-hidden="true">3.3.1.</strong> Promotables</a></li></ol></li><li class="chapter-item expanded "><a href="api/placements.html"><strong aria-hidden="true">3.4.</strong> Creating placements</a></li><li class="chapter-item expanded "><a href="api/tracking/tracking.html"><strong aria-hidden="true">3.5.</strong> Tracking</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/tracking/clicks.html"><strong aria-hidden="true">3.5.1.</strong> Clicks</a></li><li class="chapter-item expanded "><a href="api/tracking/views.html"><strong aria-hidden="true">3.5.2.</strong> Views</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.3.</strong> Conversions</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.6.</strong> Managing Ads</div></li></ol></li><li class="chapter-item expanded "><a href="bidding.html"><strong aria-hidden="true">4.</strong> Bidding models</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Enlay Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="enlay-documentation"><a class="header" href="#enlay-documentation">Enlay Documentation</a></h1>
<p>Native sponsored advertisements for in-house advertising. Enlay provides the platform and development tools required for businesses to natively sponsor products.</p>
<p><a href="https://enlay.io">Learn more</a></p>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<ul>
<li><a href="./getting_started.html">Getting started with enlay</a></li>
<li><a href="./api/api.html">Using the enlay API</a></li>
<li><a href="./bidding.html">Bidding models</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h1>
<ol>
<li><a href="https://publisher.enlay.io">Create your publisher account</a></li>
<li>Fill in your website name, branding and other details</li>
<li>Connect your stripe account</li>
<li><a href="getting_started.html#todo">Setup your custom domain</a></li>
<li>Create your categories</li>
<li>Create your slots</li>
<li><a href="./api/api.html">Integrate with our API</a></li>
<li>Call createPlacements with your slot ID top get the ads to display</li>
<li>Render those on the frontend!</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api"><a class="header" href="#api">API</a></h1>
<p>Enlay is API driven, letting you build the best possible experience for your advertisers.</p>
<h2 id="contents-1"><a class="header" href="#contents-1">Contents</a></h2>
<ol>
<li><a href="api/./sdks.html">Language SDKs</a></li>
<li><a href="api/./authentication.html">Authentication</a></li>
<li><a href="api/./promotables.html">Fetching promotables</a></li>
<li><a href="api/./placements.html">Creating placements</a></li>
<li><a href="api/./tracking/tracking.html">Tracking</a></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="authentication"><a class="header" href="#authentication">Authentication</a></h1>
<p>Some of our API endpoints require an API token. This token <strong>must be kept secret</strong> and never exposed to users, or they could perform administrative actions on your behalf.</p>
<h2 id="finding-your-api-token"><a class="header" href="#finding-your-api-token">Finding your API token</a></h2>
<p>You can find your API token by going to the <a href="https://publisher.enlay.io">Publisher Dashboard</a> &gt; <code>Publisher</code> &gt; <code>Your API token</code>.</p>
<p><img src="api/authentication_api_token.png" alt="" /></p>
<h2 id="authenticating-with-the-api"><a class="header" href="#authenticating-with-the-api">Authenticating with the API</a></h2>
<p>Set the HTTP <code>Authorization</code> header to the API token.</p>
<pre><code>Authorization: eyJ0eXj2dWdawd....
</code></pre>
<h3 id="authenticating-with-an-sdk"><a class="header" href="#authenticating-with-an-sdk">Authenticating with an SDK</a></h3>
<p>If you're using one of our <a href="api/./sdks.html">SDKs</a>, please refer to the docs.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="language-sdks"><a class="header" href="#language-sdks">Language SDKs</a></h1>
<p>We have open source libraries for the following languages so you can easily integrate with enlay.</p>
<p>Docs for each language can be found in each SDK's repository.</p>
<table><thead><tr><th>Language</th><th><a href="api/./tracking/tracking.html">View &amp; Click tracking</a></th><th><a href="api/placements.html">Creating Placements</a></th><th>Managing Ads</th><th>Conversion Tracking</th></tr></thead><tbody>
<tr><td><a href="https://github.com/duccltd/enlay-node">JavaScript/Node</a></td><td>Yes</td><td>Yes</td><td>No</td><td>No</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="webhooks"><a class="header" href="#webhooks">Webhooks</a></h1>
<p>Enlay currently uses webhooks for certain types of advertisement creation. When creating a category, automatic advertisement creation requires webhooks to be set up the fetch the registered users promotables.</p>
<h2 id="contents-2"><a class="header" href="#contents-2">Contents</a></h2>
<ol>
<li><a href="api/webhooks/promotables.html">Promotables</a></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fetching-promotables"><a class="header" href="#fetching-promotables">Fetching promotables</a></h1>
<p>Enlay uses a webhook to make a request to your API to fetch a users promotables. It is advised when users log in to use the same email or credentials which relates to
the respective publisher (e.g If your site uses discord to log in, then it's recommended the user uses discord as a means of logging into their advertisement portal).</p>
<p>Below is an example of the request that we send. This will be sent at advertisement creation time to fetch the viable promotables for that user. For this example, it will target a specific API path (this is configurable on the publisher dashboard).</p>
<h2 id="post-httpsyourapicomapiv1enlayproducts"><a class="header" href="#post-httpsyourapicomapiv1enlayproducts">POST <code>https://yourapi.com/api/v1/enlay/products</code></a></h2>
<h3 id="signature-validation"><a class="header" href="#signature-validation">Signature validation</a></h3>
<p>No validation required as of yet. We will notify when this is added.</p>
<h3 id="request-body"><a class="header" href="#request-body">Request body</a></h3>
<pre><code class="language-json">{
    &quot;id&quot; &quot;uuidv4...&quot;,
    &quot;timestamp&quot;: &quot;...&quot;,
    &quot;type&quot;: &quot;PROMOTABLE&quot;,
    &quot;data&quot;: {
        &quot;promotable&quot;: {
            &quot;category&quot;: {
                &quot;id&quot;: &quot;uuidv4...&quot;,
                &quot;name&quot;: &quot;Category name&quot;
            },
            &quot;advertiser&quot;: {
                &quot;email&quot;: &quot;useremail@gmail.com&quot;,
                &quot;discord_id&quot;: &quot;1948237428423...&quot;
            }
        }
    }
}
</code></pre>
<h3 id="webhook-structure"><a class="header" href="#webhook-structure">Webhook structure</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>id</td><td>The webhook ID</td></tr>
<tr><td>timestamp</td><td>Webhook sent at timestamp</td></tr>
<tr><td>type</td><td>Webhook type</td></tr>
<tr><td>data</td><td>Promotable</td></tr>
</tbody></table>
<h3 id="promotable-object"><a class="header" href="#promotable-object">Promotable object</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>category</td><td>Category</td></tr>
<tr><td>advertiser</td><td>Advertiser</td></tr>
</tbody></table>
<h3 id="category"><a class="header" href="#category">Category</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>id</td><td>Category ID</td></tr>
<tr><td>name</td><td>Category name</td></tr>
</tbody></table>
<h3 id="advertiser"><a class="header" href="#advertiser">Advertiser</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>email</td><td>Advertiser email address</td></tr>
<tr><td>discord_id</td><td>Advertiser discord id (optional depending on login options)</td></tr>
</tbody></table>
<h2 id="expected-response"><a class="header" href="#expected-response">Expected response</a></h2>
<p>We schema check every response you give back for validity checks. There are several fields you can store on an advertisement object (useful if you are wanting to generate placements on the frontend rather than the backend). The expected response payload is shown below.</p>
<h3 id="expected-response-payload"><a class="header" href="#expected-response-payload">Expected response payload</a></h3>
<pre><code class="language-json">[
    {
        &quot;id&quot;: &quot;8cba...&quot;,
        &quot;display_name&quot;: &quot;Shiny shoes&quot;,
        &quot;description&quot;: &quot;Pink shoes with green laces&quot;,
        &quot;image_url&quot;: &quot;https://yourapi.com/api/v1/images/shiny-shoes.png&quot; 
    }
]
</code></pre>
<h3 id="promotable"><a class="header" href="#promotable">Promotable</a></h3>
<table><thead><tr><th>Field</th><th>Description</th><th>Required</th></tr></thead><tbody>
<tr><td>id</td><td>ID of the promotable/product on your platform</td><td>Yes</td></tr>
<tr><td>display_name</td><td>How the promotable is displayed to users on your platform</td><td>Yes</td></tr>
<tr><td>description</td><td>Description of the promotable to users</td><td>No</td></tr>
<tr><td>image_url</td><td>Image of the promotable</td><td>No</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-placements"><a class="header" href="#creating-placements">Creating placements</a></h1>
<p>To get an advertisement to display you need to create a <em>placement</em>.</p>
<p>A <em>placement</em> represents an single showing of an ad.</p>
<h2 id="graphql-request"><a class="header" href="#graphql-request">GraphQL Request</a></h2>
<pre><code class="language-graphql">mutation {
    createPlacements(input: {
        slotId: &quot;d4af8161-0993-4589-a0d5-f8718b062d93&quot;
        max: 1
        unique: true
    }) {
        # The time the placement was created
        timestamp

        # Unique ID of this placement
        id

        # ID of the advertisement showing in this placement
        advertisementId
    }
}
</code></pre>
<table><thead><tr><th>Field</th><th>Required</th><th>Description</th><th>Format</th><th>Default</th></tr></thead><tbody>
<tr><td>slotId</td><td>Yes</td><td>The ID of the slot you'd like to get advertisements for.</td><td>UUID v4</td><td></td></tr>
<tr><td>max</td><td>No</td><td>The maximum number of advertisements you'd like to show for a slot. For example, you may want to have a single slot for the front page of your slot, but on the page you'd like to display 3 ads in different spots.</td><td>Integer</td><td>1</td></tr>
<tr><td>unique</td><td>No</td><td>When specifying a max of more than 1, setting <code>unique</code> to true ensures that different ads are returned instead of the same one multiple times.</td><td>Boolean</td><td>true</td></tr>
</tbody></table>
<h3 id="response"><a class="header" href="#response">Response</a></h3>
<pre><code class="language-json">{
    &quot;data&quot;: {
        &quot;createPlacements&quot;: [
            {
                &quot;timestamp&quot;: &quot;2021-12-29T16:35:53+00:00&quot;,
                &quot;id&quot;: &quot;3cc60e23-6a81-4958-8c6e-b2a5b9a89267&quot;,
                &quot;advertisementId&quot;: &quot;015ec88f-5463-4c7e-bf34-362d0c60caba&quot;
            }
        ]
    }
}
</code></pre>
<table><thead><tr><th>Field</th><th>Description</th><th>Format</th></tr></thead><tbody>
<tr><td>timestamp</td><td>The time the placement was created</td><td>UTC timestamp as RFC3339</td></tr>
<tr><td>id</td><td>Unique ID of this placement</td><td>UUID v4</td></tr>
<tr><td>advertisementId</td><td>Unique ID of the advertisement showing in this placement</td><td>UUID v4</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tracking"><a class="header" href="#tracking">Tracking</a></h1>
<p>Enlay currently supports tracking clicks and views. These are reported by your frontend and visible in the dashboards, from the api and in reports.</p>
<h2 id="contents-3"><a class="header" href="#contents-3">Contents</a></h2>
<ol>
<li><a href="api/tracking/clicks.html">Clicks</a></li>
<li><a href="api/tracking/views.html">Views</a></li>
<li>Conversions</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="clicks"><a class="header" href="#clicks">Clicks</a></h1>
<p>Clicks can be registered by using the placement ID.</p>
<h2 id="get-httpsapienlayiopplacement_idc"><a class="header" href="#get-httpsapienlayiopplacement_idc">GET <code>https://api.enlay.io/p/{placement_id}/c</code></a></h2>
<h3 id="authorization"><a class="header" href="#authorization">Authorization</a></h3>
<p>No authorization is required for this endpoint.</p>
<h3 id="url-fields"><a class="header" href="#url-fields">URL fields</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>placement_id</td><td>The ID of the placement that has been clicked</td></tr>
</tbody></table>
<h3 id="query-parameters"><a class="header" href="#query-parameters">Query parameters</a></h3>
<table><thead><tr><th>Field</th><th>Required</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr><td>redirect_url</td><td>No</td><td>A URL to redirect users to once they click on the advertisement. With this parameter the response code is set to <code>302</code> with a <code>Location</code> response header.</td><td>https://example.com</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="registering-views"><a class="header" href="#registering-views">Registering views</a></h1>
<p>Views can be registered by using the placement ID.</p>
<p>This endpoint should be called when an advertisement has been seen. What 'seen' means is up to you, for example:</p>
<ul>
<li>When the page has been loaded.</li>
<li>When a user has scrolled down so that the advertisement is on their screen.</li>
<li>When a user hovers over the advertisement.</li>
</ul>
<h2 id="post-httpsapienlayiopv"><a class="header" href="#post-httpsapienlayiopv">POST <code>https://api.enlay.io/p/v</code></a></h2>
<h3 id="authorization-1"><a class="header" href="#authorization-1">Authorization</a></h3>
<p>No authorization is required for this endpoint.</p>
<h3 id="required-headers"><a class="header" href="#required-headers">Required headers</a></h3>
<pre><code>Content-Type: application/json
</code></pre>
<h3 id="request-body-1"><a class="header" href="#request-body-1">Request body</a></h3>
<pre><code class="language-json">[
    { &quot;id&quot;: &quot;f85ad1c4-9c67-4218-a2b0-a637f155036f&quot; },
    { &quot;id&quot;: &quot;8c873628-f6bb-4230-b8ee-3e112c361b3b&quot; }
]
</code></pre>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>id</td><td>The ID of the placement that has been viewed</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bidding-models"><a class="header" href="#bidding-models">Bidding models</a></h1>
<p>This is when advertisements are displayed and how much advertisers are paying for them.</p>
<p>Currently we support our <em>Budget share</em> model instead of more traditional models like <em>Cost Per Click</em> (CPC).</p>
<h2 id="budget-share"><a class="header" href="#budget-share">Budget share</a></h2>
<p>With the budget share bidding model, impressions are distributed to each ad depending on how large their budgets are.</p>
<p>For example with the following advertisements:</p>
<ul>
<li><em>Foo</em> = $10/day</li>
<li><em>Bar</em> = $90/day</li>
</ul>
<p><em>Foo</em> will receive 10% of the impressions that day, whilst <em>Bar</em> receives 90%.</p>
<p>This model ensures that advertisers get a fair share of the impressions, instead of 1 high budget advertisement getting all the traffic, whilst still giving larger advertisers a majority.</p>
<p>It also makes click/impression fraud near impossible as common methods like refreshing the page hundreds of times can't be targetted at a single advertisement and therefore the ratio is not affected.</p>
<h2 id="cpccpmcparoas"><a class="header" href="#cpccpmcparoas">CPC/CPM/CPA/ROAS</a></h2>
<p>We plan to add these models in the future depending on demand. Let us know if these models would help your business!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
